<script type="text/javascript">
  /* es2015 [promise] */

  function getAmount(userId) {
  	getUser(userId)
  	.then(getBankBalance)
  	.then(amount => console.log('Promise:', amount));
  }
  
  /* es2017 [async, await] */

  async function getAmount2(userId) {
    let user = await getUser(userId);
    let amount = await getBankBalance(user)
    console.log('Async/await:',amount);
  }

  getAmount('1');
  getAmount2('1');

  function getUser(userId) {
    return new Promise(resolve => setTimeout(() => resolve('john'), 1000));
  }
  function getBankBalance(user) {
  	return new Promise((resolve, reject) => setTimeout(() => {
  	  if(user == 'john') resolve('$1,000');
  	  else reject('unknow user [custom reject error]');
  	}), 1000);
  }

  /* other example of async/promise */

  async function doubleAndAdd(a, b) {
  	a = await doubleAfter1Sec(a);
  	b = await doubleAfter1Sec(b);
  	return `Async/promise: ${a + b}`;
  }
  doubleAndAdd(1, 1).then(console.log);  

  function doubleAfter1Sec(param) {
  	return new Promise(resolve => setTimeout(() => resolve(param * 2), 1000));
  }

  /* Paralel call function with async/await */

  async function doubleAndAddParalel(a, b) {
  	[a, b] = await Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)]);
  	return `Async/promise paralel: ${a + b}`;;
  }

  doubleAndAddParalel(1, 2).then(console.log);
</script>